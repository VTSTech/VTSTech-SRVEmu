=== NETWORK EVENT SYSTEM ===
Game_InitializeNetworkSystem → NetworkEvent_RegisterHandlers → NetworkEvent_Handler
Event codes: 0xc032 (ErrorSession), 0xc034 (MultiAuth), 0xc03c (MultiPlayer CRITICAL), 0xc03d (SessionInit)
0xc03c → PacketConstructor_MultiPlayer → SessionInit_MultiPlayer → RaceSession_CreateFull → NetworkMain_Setup → ChallengeSystem_Startup → System_CommandDispatcher(0x88) → ChallengeSystem_RegisterState → sends CHAL

=== PROTOCOL HANDLER REGISTRATION ===
RaceSession_CreateFull registers:
• Type 0: ProtocolHandler_GameState
• Type 4: ProtocolHandler_GameCommands
• Type 6: Protocol_GameStateManager
• Type 7: ProtocolHandler_Session

=== NETWORK PACKET FLOW ===
PS2 Hardware Interrupt → ConnectionHandler_ChannelX_In → PacketReceiver_RawData → Packet_PreProcessor → NetworkReceive_CommandDispatcher → routes based on packet type

=== MULTIPLAYER SESSION CREATION ===
Client receives event 0xc03c → PacketConstructor_MultiPlayer processes → SessionInit_MultiPlayer → RaceSession_CreateFull → NetworkMain_Setup → ChallengeSystem_Startup → System_CommandDispatcher(0x88) → ChallengeSystem_RegisterState → sends CHAL
272-byte session data copied to offset 0x2dc, flag at 0x2d8=1 when valid
Base structure: DAT_004e31a8 (global game session structure)

=== CHALLENGE SYSTEM ARCHITECTURE ===
NetworkMain_Setup → ChallengeSystem_Startup → System_CommandDispatcher(0x88) → ChallengeSystem_RegisterState → System_SendCommand_Internal(cmd="chal") → sends CHAL
System commands: 0x125=CommandHandler_CHAL, 0x126=Challenge_ReceiveNotification, 0x127=ChallengeValidation_CanInitiate, 0x128=ChallengeValidation_IsPlayerAvailable

=== PROTOCOL MESSAGE ROUTING ===
NetworkEvent_MainDispatcher → Protocol_MessageRouter
Parameters: param_1 (type), param_2 (subtype/flags), param_3 (data)
Jump tables: Primary @ 0x3B01A0 (param_1), Secondary @ 0x3B04C0 (param_2)
Lobby entry: param_2=0 → ProtocolHandler_LobbyStateEntry → ProtocolEvent_LobbyTrigger → GameState_ForceLobbyEntry → state=0x4B1

=== MEMORY STRUCTURES ===
DAT_0038333c: Current game state (0x4b1=LOBBY, 0x4ba=NETWORK_INIT)
DAT_00382eb1: Conditional lobby block
DAT_004e1428: Multiplayer packet data array
DAT_004e1420: Array element count
g_ProtocolRegistry @ 0x0038b970: +0x00=vtable, +0x04=handler array, +0x08=count (0x1d=29)
g_BuddySystem @ 0x0039454c: +0x00=config table, +0x40=buddy port, +0x50=init flag
g_ChallengeSystem @ 0x0038b838 (300 bytes)
DAT_004e31a8: Main game session structure (1000+ bytes)
  +0x2d8: Session data valid flag (1 byte, 0=invalid, 1=valid)
  +0x2dc: 272-byte session data (copied from play command)
AuthState_Complete sets state at offset 0x2c0 to 3 (COMPLETE)

=== SYSTEM_COMMANDDISPATCHER HANDLERS ===
0x0E (14): System_AUXI_Dispatcher
0x34 (52): CommandHandler_AUXI2
0x88 (136): ChallengeSystem_RegisterState (sends CHAL)
0x11F (287): SystemCommand_AcceptChallenge
0x125 (293): CommandHandler_CHAL
0x126 (294): Challenge_ReceiveNotification

=== PACKET CONSTRUCTION ===
PacketConstructor_MultiPlayer builds data from DAT_004e1428 array
Structure: [command][subcommand][size][data_with_0x1b]
NetworkReceive_CommandDispatcher expects: 4-byte command, 4-byte subcommand/flags, 4-byte size, data payload

=== HARDWARE INTEGRATION ===
PS2 INTC/DMAC interrupts trigger network events
Function pointer table @ 0x0037892c contains ConnectionHandler_ChannelX_In handlers

=== AUTHENTICATION CORRECTION ===
NO "AUTH_STATE" field. Flow:
1. Server auth response: STATUS=1 + SESS
2. Server sends automatic pers response
3. NetworkEvent_MainHandler receives → Protocol_ChannelDispatcher → Authentication_TriggerStateMachine → Authentication_ProcessStateChange → Authentication_StateMachineMain
4. AuthState_TransitionToComplete/AuthState_FinalizeComplete set state to 3 → AuthState_Complete

=== AUTHENTICATION STATE JUMP TABLE @ 0x3d9df0 ===
State 0: AuthState_Initial
State 1: AuthState_Processing
State 2: AuthState_Validating
State 3: 0x2993f4 (unknown)
State 4: AuthState_TransitionToComplete
State 5: AuthState_TransitionToComplete
State 6: AuthState_FinalizeComplete
State 7: AuthState_FinalizeComplete

=== CONNECTION HANDLERS ===
Function pointer table @ 0x0037892c: +0x00=ConnectionHandler_Channel0_In, +0x10=ConnectionHandler_Channel1_In, etc.
Registered by FUN_0017eec0 (network initialization)

=== PROTOCOL ROUTING TABLE @ 0x00374e14 ===
Little-endian format, 7 channels × 0x280 bytes per channel, 8 command slots × 0x50 bytes per slot
Handler pointers at offset 0x40 in each slot
Identifiers: 'MSTK', 'MSON', 'MPLA'